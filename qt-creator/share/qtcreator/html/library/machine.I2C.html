

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>class I2C – a two-wire serial protocol &mdash; MicroPython 1.8 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />
  

  
    <link rel="top" title="MicroPython 1.8 documentation" href="../index.html"/>
        <link rel="up" title="MicroPython libraries" href="index.html"/>
        <link rel="next" title="The MicroPython language" href="../reference/index.html"/>
        <link rel="prev" title="class I2C – a two-wire serial protocol" href=""/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> MicroPython
          

          
            
            <img src="../_static/web-logo-sticky.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/quickref.html">Quick reference for the openmvcam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/tutorial/index.html">OpenMV Cam Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">MicroPython libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#python-standard-libraries-and-micro-libraries">Python standard libraries and micro-libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#micropython-specific-libraries">MicroPython-specific libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#libraries-specific-to-the-openmv-cam">Libraries specific to the OpenMV Cam</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pyb.html"><code class="docutils literal"><span class="pre">pyb</span></code> &#8212; functions related to the board</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.ADC.html">class ADC &#8211; analog to digital conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.CAN.html">class CAN &#8211; controller area network communication bus</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.DAC.html">class DAC &#8211; digital to analog conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.ExtInt.html">class ExtInt &#8211; configure I/O pins to interrupt on external events</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.I2C.html">class I2C &#8211; a two-wire serial protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.LED.html">class LED &#8211; LED object</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.Pin.html">class Pin &#8211; control I/O pins</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.Servo.html">class Servo &#8211; 3-wire hobby servo driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.SPI.html">class SPI &#8211; a master-driven serial protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.Timer.html">class Timer &#8211; control internal timers</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.Timer.html#class-timerchannel-setup-a-channel-for-a-timer">class TimerChannel &#8212; setup a channel for a timer</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.UART.html">class UART &#8211; duplex serial communication bus</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.USB_VCP.html">class USB_VCP &#8211; USB virtual comm port</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.time.html"><code class="docutils literal"><span class="pre">time</span></code> &#8212; tracking elapsed time</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.sensor.html"><code class="docutils literal"><span class="pre">sensor</span></code> &#8212; camera sensor</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html"><code class="docutils literal"><span class="pre">image</span></code> &#8212; machine vision</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-haarcascade-feature-descriptor">class HaarCascade &#8211; Feature Descriptor</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-histogram-histogram-object">class Histogram &#8211; Histogram Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-percentile-percentile-object">class Percentile &#8211; Percentile Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-statistics-statistics-object">class Statistics &#8211; Statistics Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-blob-blob-object">class Blob &#8211; Blob object</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-qrcode-qrcode-object">class QRCode &#8211; QRCode object</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-apriltag-apriltag-object">class AprilTag &#8211; AprilTag object</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-barcode-barcode-object">class BarCode &#8211; BarCode object</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-image-image-object">class Image &#8211; Image object</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.gif.html"><code class="docutils literal"><span class="pre">gif</span></code> &#8212; gif recording</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.gif.html#class-gif-gif-recorder">class Gif &#8211; Gif recorder</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.mjpeg.html"><code class="docutils literal"><span class="pre">mjpeg</span></code> &#8212; mjpeg recording</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.mjpeg.html#class-mjpeg-mjpeg-recorder">class Mjpeg &#8211; Mjpeg recorder</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.lcd.html"><code class="docutils literal"><span class="pre">lcd</span></code> &#8212; lcd shield driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.fir.html"><code class="docutils literal"><span class="pre">fir</span></code> &#8212; thermopile shield driver (fir == far infrared)</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.cpufreq.html"><code class="docutils literal"><span class="pre">cpufreq</span></code> &#8212; easy cpu frequency control</a></li>
<li class="toctree-l3"><a class="reference internal" href="machine.html"><code class="docutils literal"><span class="pre">machine</span></code> &#8212; functions related to the board</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">class I2C &#8211; a two-wire serial protocol</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#constructors">Constructors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#general-methods">General Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#primitive-i2c-operations">Primitive I2C operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#standard-bus-operations">Standard bus operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#memory-operations">Memory operations</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">The MicroPython language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">MicroPython license information</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">MicroPython</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">MicroPython libraries</a> &raquo;</li>
      
    <li>class I2C &#8211; a two-wire serial protocol</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/library/machine.I2C.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="class-i2c-a-two-wire-serial-protocol">
<span id="machine-i2c"></span><h1>class I2C &#8211; a two-wire serial protocol<a class="headerlink" href="#class-i2c-a-two-wire-serial-protocol" title="Permalink to this headline">¶</a></h1>
<p>I2C is a two-wire protocol for communicating between devices. At the physical
level it consists of 2 wires: SCL and SDA, the clock and data lines respectively.</p>
<p>I2C objects are created attached to a specific bus. They can be initialized
when created, or initialized later on.</p>
<p>Printing the i2c object gives you information about its configuration.</p>
<p>Please use <code class="docutils literal"><span class="pre">pyb.I2C</span></code> instead of this object if possible for high-speed I2C.
This class is for low-speed software I2C done via bit-banging.</p>
<div class="section" id="constructors">
<h2>Constructors<a class="headerlink" href="#constructors" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">machine.</code><code class="descname">I2C</code><span class="sig-paren">(</span><em>scl</em>, <em>sda</em>, <em>*</em>, <em>freq=400000</em><span class="sig-paren">)</span></dt>
<dd><p>Construct and return a new I2C object.
See the init method below for a description of the arguments.</p>
</dd></dl>

</div>
<div class="section" id="general-methods">
<h2>General Methods<a class="headerlink" href="#general-methods" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt>
<code class="descclassname">i2c.</code><code class="descname">init</code><span class="sig-paren">(</span><em>scl</em>, <em>sda</em>, <em>*</em>, <em>freq=400000</em><span class="sig-paren">)</span></dt>
<dd><blockquote>
<div><p>Initialize the I2C bus with the given arguments:</p>
<blockquote>
<div><ul class="simple">
<li><cite>scl</cite> is a pin object for the SCL line</li>
<li><cite>sda</cite> is a pin object for the SDA line</li>
<li><cite>freq</cite> is the SCL clock rate</li>
</ul>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt>
<code class="descclassname">i2c.</code><code class="descname">scan</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Scan all I2C addresses between 0x08 and 0x77 inclusive and return a list of
those that respond. A device responds if it pulls the SDA line low after
its address (including a read bit) is sent on the bus.</p>
</dd></dl>

</div>
<div class="section" id="primitive-i2c-operations">
<h2>Primitive I2C operations<a class="headerlink" href="#primitive-i2c-operations" title="Permalink to this headline">¶</a></h2>
<p>The following methods implement the primitive I2C master bus operations and can
be combined to make any I2C transaction. They are provided if you need more
control over the bus, otherwise the standard methods (see below) can be used.</p>
<dl class="method">
<dt id="i2c.start">
<code class="descclassname">i2c.</code><code class="descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#i2c.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a start bit on the bus (SDA transitions to low while SCL is high).</p>
</dd></dl>

<dl class="method">
<dt id="i2c.stop">
<code class="descclassname">i2c.</code><code class="descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#i2c.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a stop bit on the bus (SDA transitions to high while SCL is high).</p>
</dd></dl>

<dl class="method">
<dt id="i2c.readinto">
<code class="descclassname">i2c.</code><code class="descname">readinto</code><span class="sig-paren">(</span><em>buf</em><span class="sig-paren">)</span><a class="headerlink" href="#i2c.readinto" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads bytes from the bus and stores them into <cite>buf</cite>. The number of bytes
read is the length of <cite>buf</cite>. An ACK will be sent on the bus after
receiving all but the last byte, and a NACK will be sent following the last
byte.</p>
</dd></dl>

<dl class="method">
<dt id="i2c.write">
<code class="descclassname">i2c.</code><code class="descname">write</code><span class="sig-paren">(</span><em>buf</em><span class="sig-paren">)</span><a class="headerlink" href="#i2c.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write all the bytes from <cite>buf</cite> to the bus. Checks that an ACK is received
after each byte and raises an OSError if not.</p>
</dd></dl>

</div>
<div class="section" id="standard-bus-operations">
<h2>Standard bus operations<a class="headerlink" href="#standard-bus-operations" title="Permalink to this headline">¶</a></h2>
<p>The following methods implement the standard I2C master read and write
operations that target a given slave device.</p>
<dl class="method">
<dt id="i2c.readfrom">
<code class="descclassname">i2c.</code><code class="descname">readfrom</code><span class="sig-paren">(</span><em>addr</em>, <em>nbytes</em><span class="sig-paren">)</span><a class="headerlink" href="#i2c.readfrom" title="Permalink to this definition">¶</a></dt>
<dd><p>Read <cite>nbytes</cite> from the slave specified by <cite>addr</cite>.
Returns a <cite>bytes</cite> object with the data read.</p>
</dd></dl>

<dl class="method">
<dt id="i2c.readfrom_into">
<code class="descclassname">i2c.</code><code class="descname">readfrom_into</code><span class="sig-paren">(</span><em>addr</em>, <em>buf</em><span class="sig-paren">)</span><a class="headerlink" href="#i2c.readfrom_into" title="Permalink to this definition">¶</a></dt>
<dd><p>Read into <cite>buf</cite> from the slave specified by <cite>addr</cite>.
The number of bytes read will be the length of <cite>buf</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="i2c.writeto">
<code class="descclassname">i2c.</code><code class="descname">writeto</code><span class="sig-paren">(</span><em>addr</em>, <em>buf</em>, <em>*</em>, <em>stop=True</em><span class="sig-paren">)</span><a class="headerlink" href="#i2c.writeto" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the bytes from <cite>buf</cite> to the slave specified by <cite>addr</cite>.</p>
<p>The <cite>stop</cite> argument (only available on WiPy) tells if a stop bit should be
sent at the end of the transfer. If <cite>False</cite> the transfer should be
continued later on.</p>
</dd></dl>

</div>
<div class="section" id="memory-operations">
<h2>Memory operations<a class="headerlink" href="#memory-operations" title="Permalink to this headline">¶</a></h2>
<p>Some I2C devices act as a memory device (or set of registers) that can be read
from and written to. In this case there are two addresses associated with an
I2C transaction: the slave address and the memory address. The following
methods are convenience functions to communicate with such devices.</p>
<dl class="method">
<dt id="i2c.readfrom_mem">
<code class="descclassname">i2c.</code><code class="descname">readfrom_mem</code><span class="sig-paren">(</span><em>addr</em>, <em>memaddr</em>, <em>nbytes</em>, <em>*</em>, <em>addrsize=8</em><span class="sig-paren">)</span><a class="headerlink" href="#i2c.readfrom_mem" title="Permalink to this definition">¶</a></dt>
<dd><p>Read <cite>nbytes</cite> from the slave specified by <cite>addr</cite> starting from the memory
address specified by <cite>memaddr</cite>.
The argument <cite>addrsize</cite> specifies the address size in bits (on ESP8266
this argument is not recognized and the address size is always 8 bits).
Returns a <cite>bytes</cite> object with the data read.</p>
</dd></dl>

<dl class="method">
<dt id="i2c.readfrom_mem_into">
<code class="descclassname">i2c.</code><code class="descname">readfrom_mem_into</code><span class="sig-paren">(</span><em>addr</em>, <em>memaddr</em>, <em>buf</em>, <em>*</em>, <em>addrsize=8</em><span class="sig-paren">)</span><a class="headerlink" href="#i2c.readfrom_mem_into" title="Permalink to this definition">¶</a></dt>
<dd><p>Read into <cite>buf</cite> from the slave specified by <cite>addr</cite> starting from the
memory address specified by <cite>memaddr</cite>. The number of bytes read is the
length of <cite>buf</cite>.
The argument <cite>addrsize</cite> specifies the address size in bits (on ESP8266
this argument is not recognized and the address size is always 8 bits).</p>
</dd></dl>

<dl class="method">
<dt id="i2c.writeto_mem">
<code class="descclassname">i2c.</code><code class="descname">writeto_mem</code><span class="sig-paren">(</span><em>addr</em>, <em>memaddr</em>, <em>buf</em>, <em>*</em>, <em>addrsize=8</em><span class="sig-paren">)</span><a class="headerlink" href="#i2c.writeto_mem" title="Permalink to this definition">¶</a></dt>
<dd><p>Write <cite>buf</cite> to the slave specified by <cite>addr</cite> starting from the
memory address specified by <cite>memaddr</cite>.
The argument <cite>addrsize</cite> specifies the address size in bits (on ESP8266
this argument is not recognized and the address size is always 8 bits).</p>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../reference/index.html" class="btn btn-neutral float-right" title="The MicroPython language" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="" class="btn btn-neutral" title="class I2C – a two-wire serial protocol" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-2017, Damien P. George, OpenMV LLC, and contributors.
      Last updated on 27 Mar 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  <!--
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Ports and Versions</span>
    openmvcam (latest)
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Ports</dt>
      
        <dd><a href="//en/latest/unix">unix</a></dd>
      
        <dd><a href="//en/latest/pyboard">pyboard</a></dd>
      
        <dd><a href="//en/latest/wipy">wipy</a></dd>
      
        <dd><a href="//en/latest/esp8266">esp8266</a></dd>
      
        <dd><a href="//en/latest/openmvcam">openmvcam</a></dd>
      
    </dl>
    <dl>
      <dt>Versions</dt>
      
        <dd><a href="//en/latest/openmvcam">latest</a></dd>
      
    </dl>
    -->
    <!--
    <dl>
      <dt>Downloads</dt>
      
    </dl>
    -->
    <!--
    <hr/>
    <dl>
      <dt>External links</dt>
        <dd>
          <a href="http://www.micropython.org">micropython.org</a>
        </dd>
        <dd>
          <a href="http://github.com/micropython/micropython">GitHub</a>
        </dd>
    </dl>
  </div>
</div>
-->

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.8',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>